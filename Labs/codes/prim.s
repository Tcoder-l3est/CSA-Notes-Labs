
;------------------------------------------------ ------------------
; ????? main ??
; ?????,??????
; r1 ???table??????????????
; r2 ?????2---INF?
; r3 ?????table 0---r1 ????r2 ????? 
; ????r2
;	????????table????????
; 		?????????????table[r1] ??
;	????????,???????
;		?r2++ ??????????
;------------------------------------------------ ------------------
		.data

		;*** table?size = count = 10
		;*** table ??? 10 * 4 = 40
		.global		Count
Count:		.word		10
		.global		Table
Table:		.space		Count*4


		.text
		.global	main
main:
		;*** ???
		addi		r1,r0,0		; r1???????????? ?? r1 = 0 
		addi		r2,r0,2 	; r2???????????? ?? r2 = 2

		;*** ??R2???Table??????
NextValue:	addi	r3,r0,0 	; ???? r3=0,????Table
Loop:		seq		r4,r1,r3	; ???????Table ???r1 == r3?
		bnez		r4,IsPrim	; ?????,??R2???,????
		lw          r5,Table(R3); ??Table[R3] -> r5
		divu		r6,r2,r5	; r2 / r5 -> r6 
		multu		r7,r6,r5	; r6 * r5 -> r7	
		subu		r8,r2,r7	; r2 - r7 -> r8	 r8?r5/r2???
		beqz		r8,IsNoPrim	; ??r8,0??R5??R2,??r2????
		addi		r3,r3,4		; r3 += 4 goto next table entry
		j           Loop		; goto Loop

IsPrim: 	;*** ????,????table,????
		sw          Table(r1),r2; ???R2??table[r1]
		addi		r1,r1,4		; r1++ ???????

		;*** 'Count' reached?
		lw		r9,Count		; 10(count) -> r9
		srli	r10,r1,2		; r1 ????2? -> r10 (?4)
		sge		r11,r10,r9		; ?? r10 > r9
		bnez	r11,Finish		; r11 = 1 ??table????  ????

IsNoPrim:	;*** Check next value
		addi	r2,r2,1 		; r2++
		j		NextValue		; jump to NextValue
		
Finish: 	;*** end
		trap	0